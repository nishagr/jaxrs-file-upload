package com.gupshup.rest;

import java.util.List;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.LinkedBlockingDeque;

import javax.ws.rs.ApplicationPath;

import org.glassfish.jersey.media.multipart.MultiPartFeature;
import org.glassfish.jersey.server.ResourceConfig;

@ApplicationPath("/api")
public class MainApp extends ResourceConfig {
	private static ExecutorService executor;
	private static BlockingQueue<List<String>> queue;
	public static boolean isActive = false;
	public MainApp(){
		System.out.println("Hello Main App");
		packages("com.gupshup.rest");
		register(MultiPartFeature.class);
		executor = Executors.newFixedThreadPool(2);
		queue = new LinkedBlockingDeque<>(1);
		RowConsumer consumer = new RowConsumer(queue);
		executor.execute(consumer);
	}
}
